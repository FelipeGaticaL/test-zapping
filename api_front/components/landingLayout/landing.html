<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Video</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/normalize/5.0.0/normalize.min.css"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD"
      crossorigin="anonymous"
    />

    <link rel="stylesheet" href="./style.css" />
  </head>

  <body>
    <div class="box">
      <div class="wave -one"></div>f
      <div class="wave -two"></div>
      <div class="wave -three"></div>
    </div>
    <div class="container d-flex justify-content-center" style="height: 106rem;" > 
      <div class="h-auto ">

      <div id="cardElment" class="card align" style="width: 18rem; margin-top: 11rem">
        <div class="card-body">
          <form onsubmit="login(event)">
            <div class="mb-3">
              <label for="email" class="form-label"
                >Correo electrónico</label
              >
              <input
                type="email"
                class="form-control"
                id="email"
                name="email"
                aria-describedby="emailHelp"
              />
            
            </div>
            <div class="mb-3">
              <label for="password" class="form-label"
                >Contraseña</label
              >
              <input
                type="password"
                name="password"
                class="form-control"
                id="password"
              />
            </div>
            <div class="d-flex justify-content-center">
            <button class="btn btn-primary">Login</button>
          </div>
          <p class="fst-italic mt-4">Si aún no tienes cuenta, por favor creala acá <a href="/register">Crear Cuenta</a></p>
          </form>
        </div>

      </div>
        </div>
      </div>
    </div>
    <!-- Bootstrap CSS -->
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN"
      crossorigin="anonymous"
    ></script>
    <script src="https://unpkg.com/axios@1.1.2/dist/axios.min.js"></script>
    <script src="
      https://cdn.jsdelivr.net/npm/sweetalert2@11.7.1/dist/sweetalert2.all.min.js
      "></script>
    <script>
        async function login(event) {
                event.preventDefault();
                var password = document.getElementById("password").value;
                var mail = document.getElementById("email").value;
                let arrayData = {"mail" : mail, "password" :password}
                if(!mail || !password){
                      Swal.fire({
                            title: 'Faltan datos',
                            text: 'Debes completar todos los campos',
                            icon: 'error'
                        })} else {
                                try{
                                  const {data} = await axios.post('/api/auth/login', arrayData)          
                                  localStorage.setItem('user', JSON.stringify(data.user));
                                  localStorage.setItem('token', data.token);
                                  window.location = `/video`
                                  }catch(error){
                                        Swal.fire({
                                             title: 'Error',
                                             text: 'Usuario no válido',
                                             text: 'Credenciales invalidas',
                                             icon: 'error'
                                  });
                              }
                        }
                }


</script>




    <script></script>
  </body>
</html>
